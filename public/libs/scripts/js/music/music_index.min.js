"use strict";$.support.cors=!0,$(function(){function t(t,e,i){$.ajax({url:t,cache:!0,type:e,crossDomain:!0}).done(i)}(function(){var e=$(".col-md-6").width();(function(){function t(t){s.is(":animated")||("right"===t?(i++,s.animate({left:"-="+e},400),i===l-1&&(i=1,s.animate({left:-e},0))):(i--,s.animate({left:"+="+e},400),0===i&&(i=l-2,s.animate({left:-(e*(l-2))},0))),r.find("li:eq("+(i-1)+")").addClass("slide-active").siblings().removeClass("slide-active"))}var i=1,a=$("#galleryFrames .slide-prev"),n=$("#galleryFrames .slide-next"),s=$("#galleryFrames .gallery-hot ul"),l=$("#galleryFrames .slide-content li").length,r=$("#galleryFrames .slide-dots");s.width(e*l),$("#galleryFrames img").width(e),s.css("left",-e),n.on("click",function(){t("right")}),a.on("click",function(){t("left")}),r.on("click","li",function(){$(this).addClass("slide-active").siblings().removeClass("slide-active");var t=$(this).text()-i;i=$(this).text(),s.animate({left:"-="+e*t},300)});var o=setInterval(function(){t("right")},5e3);$("#galleryFrames").on("mouseover",function(){clearTimeout(o)}).on("mouseout",function(){o=setInterval(function(){t("right")},5e3)})})(),function(){function t(t){var n=(o-1)*e,s=$("#editorFeatured .ui-side-index");i.is(":animated")||("right"===t?a===o?(a=1,s.html(a),i.animate({left:0},400)):(a++,s.html(a),i.animate({left:"-="+e},400)):1===a?(a=o,s.html(a),i.animate({left:"-="+n},400)):(a--,s.html(a),i.animate({left:"+="+e},400)))}var i=$("#editorFeatured .screen-body"),a=1,n=$("#editorFeatured .slide-prev"),s=$("#editorFeatured .slide-next"),l=$("#editorFeatured .thumbnail"),r=l.length,o=Math.ceil(r/4),m=l.outerWidth(!0)-l.outerWidth(),h=(e-4*m)/4;l.outerWidth(h),i.width(e*o),$("#editorFeatured .ui-side-max").html(o),s.on("click",function(){t("right")}),n.on("click",function(){t("left")});var c=setInterval(function(){t("right")},5e3);$("#editorFeatured").on("mouseover",function(){clearInterval(c)}).on("mouseout",function(){c=setInterval(function(){t("right")},5e3)})}();$("#newAlbums").on("click","li",function(){if(!$(this).is(".on")){var e=$(this).text(),i="/musicindex?albumName="+encodeURIComponent("新碟榜"+e);t(i,"GET",function(t){if(t.data){var e=t.data.musics,i=$("#newAlbums .thumbnail");if(e.length<i.length){var a=e.length-1;$("#newAlbums .thumbnail:gt("+a+")").remove()}else if(e.length>i.length)for(var n=i.length;n<e.length;n++)$("#newAlbums .panel-body").append('<div class="thumbnail"><a href="" target="_blank"><img src="" alt=""/></a><div class="caption"><h5></h5><p></p></div></div>');i=$("#newAlbums .thumbnail");for(var s=0;s<i.length;s++){$(i[s]).find("a").attr("href","/music/"+e[s]._id),$(i[s]).find("h5").html(e[s].title),$(i[s]).find("p").html(e[s].singer);var l=$(i[s]).find("img");e[s].image&&(e[s].image.indexOf("http:")>-1?l.attr("src",e[s].image).attr("alt",e[s].image):l.attr("src","/upload/music/"+e[s].image).attr("alt",e[s].image))}$("#newAlbums .class-top > a").attr("href","/music/results?cat="+t.data._id+"&p=0")}else $("#newAlbums .thumbnail").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#hotProgrammes").on("click","li",function(){if(!$(this).is(".on")){var e=$(this).text(),i="/musicindex?hotProName="+encodeURIComponent("近期热门歌单"+e);t(i,"GET",function(t){var e=t.data,i=$("#hotProgrammes .thumbnail");if(e){if(e.length<i.length){var a=e.length-1;$("#hotProgrammes .thumbnail:gt("+a+")").remove()}else for(var n=i.length;n<e.length;n++)$("#hotProgrammes .panel-body").append('<div class="thumbnail"><div class="inner"><h5><a target="_blank"></a></h5><div class="content"><img src="" alt="" /></div></div></div>');i=$("#hotProgrammes .thumbnail");for(var s=0;s<e.length;s++){$(i[s]).find("h5 a").html(e[s].name).attr("href","/music/results?cat="+e[s]._id+"&p=0");var l=$(i[s]).find(".content a").length,r=e[s].musics.length;if(l>r){var o=e[s].musics.length>0?$(i[s]).find(".content a:gt("+(e[s].musics.length-1)+")"):$(i[s]).find(".content a");o.remove(),$("#hotProgrammes .thumbnail:eq("+s+") span").remove()}else if(r>l){for(var m=0;r-l>m;m++)$("#hotProgrammes .thumbnail:eq("+s+") .inner .content").append("<a href =/music/"+e[s].musics[m]._id+" target =_blank title = "+e[s].musics[m].title+"><p>"+(m+1)+"."+e[s].musics[m].title+"</p></a>");e[s].musics.length>2&&$("#hotProgrammes .thumbnail:eq("+s+") .inner .content").append("<span>...</span>")}for(var h=0;h<e[s].musics.length;h++)$(i[s]).find(".content a:eq("+h+")").attr("href","/music/"+e[s].musics[h]._id).attr("title",e[s].musics[h].title),$(i[s]).find("p:eq("+h+")").html(h+1+"."+e[s].musics[h].title);var c=$(i[s]).find("img");e[s].musics[0]?e[s].musics[0].image.indexOf("http:")>-1?c.attr("src",e[s].musics[0].image).attr("alt",e[s].musics[0].image).attr("style","display: inline"):c.attr("src","/upload/music/"+e[s].musics[0].image).attr("alt",e[s].musics[0].image).attr("style","display: inline"):c.attr("style","display: none")}$("#hotProgrammes .class-top > a").attr("href","/music/results?pro="+t.dataPro._id+"&p=0")}else $("#hotProgrammes .thumbnail").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#hotArtistSongs .hot-artistTop").on("click","li",function(){if(!$(this).is(".on")){var e=$(this).text(),i="/musicindex?hotSongs="+encodeURIComponent("本周单曲榜"+e);t(i,"GET",function(t){if(t.data){var e=t.data.musics,i=$(".hotArtist-songs li");if(e.length<i.length){var a=e.length-1;$(".hotArtist-songs li:gt("+a+")").remove()}else if(e.length>i.length)for(var n=e.length,s=i.length;n>s;s++)$(".hotArtist-songs ul").append('<li><a href="" target="_blank"><img src="" alt=""><h5></h5><p></p><span class="order"></span></a></li>');i=$(".hotArtist-songs li");for(var l=0;l<i.length;l++)if(e[l]){$(i[l]).find("a").attr("href","/music/"+e[l]._id),$(i[l]).find("h5").html(e[l].title),$(i[l]).find("p").html(e[l].singer+"&nbsp;/&nbsp;"+e[l].pv+"次播放"),$(i[l]).find("span").html(l+1);var r=$(i[l]).find("img");e[l].image&&(e[l].image.indexOf("http:")>-1?r.attr("src",e[l].image).attr("alt",e[l].image):r.attr("src","/upload/music/"+e[l].image).attr("alt",e[l].image))}}else $("#hotArtistSongs .hotArtist-songs li").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}})})()});